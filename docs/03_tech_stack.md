# 3. 技术栈 (Technology Stack)

本文档定义了项目所依赖的核心编程语言、框架和库。选择这些技术的首要原则是社区成熟度、学习友好性以及与项目核心需求的契合度。

---

### 3.1 核心语言与框架 (Core Language & Framework)

- **语言: Python (3.12+)**
  - **理由**: 我们将 **Python 3.12** 作为项目的基准开发和测试版本。选择一个具体的现代版本有助于我们利用最新的语言特性、性能优化，并最大程度地保证所有开发者的环境一致性，从而满足 `ER-3.1` (可复现性) 的要求。
  - **在项目中的应用**: 作为整个项目的唯一开发语言。

- **深度学习框架: PyTorch (>= 2.0)**
  - **理由**:
    1.  **学习友好**: PyTorch 的命令式编程风格使得调试和理解代码执行流程更直观，完美契合本项目的“学习优先”理念。
    2.  **生态成熟**: 它是学术界和工业界研究的首选框架，拥有最丰富的最新模型实现。
    3.  **原生分布式支持**: 其内置的 `torch.distributed` 包（DDP）是实现数据并行的行业标准，能让我们在不引入过多外部依赖的情况下满足分布式训练需求。
  - **在项目中的应用**: 用于构建神经网络模型 (`nn.Module`)、定义优化器、执行张量计算以及实现分布式训练。

---

### 3.2 数据处理与模型工具 (Data & Model Tooling)

- **数据集库: Hugging Face `datasets`**
  - **理由**: 这是处理和访问 NLP 数据集的事实标准。其强大的流式处理（streaming）功能是满足 `FR-3.2`（支持流式数据）需求的关键。
  - **在项目中的应用**: 用于从 Hugging Face Hub 加载和预处理数据集。

- **模型工具库: Hugging Face `transformers`**
  - **理由**: 我们无需重新发明“分词器”（Tokenizer）这个轮子。使用 `transformers` 库中经过预训练的、稳定可靠的分词器，可以让我们专注于核心的模型结构和训练逻辑。
  - **在项目中的应用**: **严格限定于分词（Tokenization）**。我们将使用 `AutoTokenizer` 来加载分词器，但**绝不会**使用该库预构建的模型类或 `Trainer` API。

---

### 3.3 配置、依赖与环境管理 (Configuration, Dependency & Environment)

- **实验配置文件格式: YAML (`.yaml`)**
  - **理由**: YAML 对人类高度可读，其支持嵌套结构和注释的特性，使其成为管理复杂实验配置的理想选择。
  - **在项目中的应用**: 作为 `configs/` 目录下所有实验配置文件的唯一格式。

- **YAML 解析库: PyYAML**
  - **理由**: `PyYAML` 是 Python 中应用最广泛、最标准的 YAML 解析库。
  - **在项目中的应用**: 用于解析 `.yaml` 文件，将实验参数加载到应用程序中。

- **环境与依赖管理工具: `uv`**
  - **理由**:
    1.  **极致的速度**: `uv` 是一个用 Rust 编写的高性能 Python 工具，其创建环境和安装依赖的速度远超传统工具，能极大缩短开发准备时间。
    2.  **一体化工具链**: `uv` 单个二进制文件同时提供了虚拟环境管理和包安装的功能，简化了工作流。
  - **在项目中的应用**:
    -   **创建虚拟环境**: 明确使用 **`uv venv`** 命令，并指定 Python 3.12 解释器，来创建项目独立的 `.venv` 虚拟环境。
    -   **安装依赖**: 使用 `uv pip install` 命令根据 `pyproject.toml` 文件安装所有项目依赖。

- **项目定义与依赖声明: `pyproject.toml`**
  - **理由**:
    1.  **官方标准**: `pyproject.toml` 是 PEP 621 定义的、用于取代 `setup.py` 和 `requirements.txt` 的现代化标准。
    2.  **单一真实来源**: 它将项目元数据、核心依赖、可选依赖整合在同一个文件中，是项目配置的唯一真实来源。
  - **在项目中的应用**: `pyproject.toml` 将定义项目的所有依赖。我们将通过 `uv pip install -e .` 命令来安装这些依赖，确保开发环境的一致性和可复现性。